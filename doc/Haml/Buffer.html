<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Haml::Buffer
  
    &mdash; Haml Documentation
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (B)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Haml.html" title="Haml (module)">Haml</a></span></span>
     &raquo; 
    <span class="title">Buffer</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Haml::Buffer
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Haml::Buffer</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="Helpers.html" title="Haml::Helpers (module)">Helpers</a></span>, <span class='object_link'><a href="Util.html" title="Haml::Util (module)">Util</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/haml/buffer.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>This class is used only internally. It holds the buffer of HTML that is eventually output as the resulting document. It&#8217;s called from within the precompiled code, and helps reduce the amount of processing done within <code>instance_eval</code>ed code.</p>

  </div>
</div>
<div class="tags">
  

</div>
  <h2>Constant Summary</h2>
  


  
  
  
  
  <h3 class="inherited">Constants included from <span class='object_link'><a href="Util.html" title="Haml::Util (module)">Util</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Util.html#RUBY_ENGINE-constant" title="Haml::Util::RUBY_ENGINE (constant)">RUBY_ENGINE</a></span>, <span class='object_link'><a href="Util.html#RUBY_VERSION-constant" title="Haml::Util::RUBY_VERSION (constant)">RUBY_VERSION</a></span></p>

  
  
  
  
  
  
  
  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#active%3D-instance_method" title="#active= (instance method)">- (Boolean) <strong>active</strong> </a>
    

    
  </span>
  
  
    
    <span class="note title writeonly">writeonly</span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#buffer-instance_method" title="#buffer (instance method)">- (String) <strong>buffer</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The string that holds the compiled HTML.</p></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#capture_position-instance_method" title="#capture_position (instance method)">- (Fixnum<sup>?</sup>) <strong>capture_position</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>nil if there&#8217;s no capture_haml block running, and the position at which it&#8217;s beginning the capture if there is one.</p></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#options-instance_method" title="#options (instance method)">- ({String =&gt; Object}) <strong>options</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The options hash passed in from <span class='object_link'><a href="Engine.html" title="Haml::Engine (class)">Engine</a></span>.</p></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#upper-instance_method" title="#upper (instance method)">- (Buffer) <strong>upper</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The <span class='object_link'><a href="" title="Haml::Buffer (class)">Buffer</a></span> for the enclosing Haml document.</p></div></span>
  
</li>

    
  </ul>



  
  
  
  
  
  
  
  
  

  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#merge_attrs-class_method" title="merge_attrs (class method)">+ ({String =&gt; String}) <strong>merge_attrs</strong>(to, from) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Merges two attribute hashes.</p></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active%3F-instance_method" title="#active? (instance method)">- (Boolean) <strong>active?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Whether or not this buffer is currently being used to render a Haml template.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#adjust_tabs-instance_method" title="#adjust_tabs (instance method)">- <strong>adjust_tabs</strong>(tab_change) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Modifies the indentation of the document.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attributes-instance_method" title="#attributes (instance method)">- <strong>attributes</strong>(class_id, obj_ref, *attributes_hashes) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#html4%3F-instance_method" title="#html4? (instance method)">- (Boolean) <strong>html4?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Whether or not the format is HTML4.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#html5%3F-instance_method" title="#html5? (instance method)">- (Boolean) <strong>html5?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Whether or not the format is HTML5.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#html%3F-instance_method" title="#html? (instance method)">- (Boolean) <strong>html?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Whether or not the format is any flavor of HTML.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Buffer) <strong>initialize</strong>(upper = nil, options = {}) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of Buffer.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#push_text-instance_method" title="#push_text (instance method)">- <strong>push_text</strong>(text, tab_change, dont_tab_up) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Appends text to the buffer, properly tabulated.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rstrip%21-instance_method" title="#rstrip! (instance method)">- <strong>rstrip!</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Remove the whitespace from the right side of the buffer string.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tabulation-instance_method" title="#tabulation (instance method)">- (Fixnum) <strong>tabulation</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The current indentation level of the document.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tabulation%3D-instance_method" title="#tabulation= (instance method)">- <strong>tabulation=</strong>(val) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets the current tabulation of the document.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#toplevel%3F-instance_method" title="#toplevel? (instance method)">- (Boolean) <strong>toplevel?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Whether or not this buffer is a top-level template, as opposed to a nested partial.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#xhtml%3F-instance_method" title="#xhtml? (instance method)">- (Boolean) <strong>xhtml?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Whether or not the format is XHTML.</p></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Util.html" title="Haml::Util (module)">Util</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Util.html#abstract-instance_method" title="Haml::Util#abstract (method)">#abstract</a></span>, <span class='object_link'><a href="Util.html#ap_geq%3F-instance_method" title="Haml::Util#ap_geq? (method)">#ap_geq?</a></span>, <span class='object_link'><a href="Util.html#ap_geq_3%3F-instance_method" title="Haml::Util#ap_geq_3? (method)">#ap_geq_3?</a></span>, <span class='object_link'><a href="Util.html#assert_html_safe%21-instance_method" title="Haml::Util#assert_html_safe! (method)">#assert_html_safe!</a></span>, <span class='object_link'><a href="Util.html#av_template_class-instance_method" title="Haml::Util#av_template_class (method)">#av_template_class</a></span>, <span class='object_link'><a href="Util.html#caller_info-instance_method" title="Haml::Util#caller_info (method)">#caller_info</a></span>, <span class='object_link'><a href="Util.html#check_encoding-instance_method" title="Haml::Util#check_encoding (method)">#check_encoding</a></span>, <span class='object_link'><a href="Util.html#check_haml_encoding-instance_method" title="Haml::Util#check_haml_encoding (method)">#check_haml_encoding</a></span>, <span class='object_link'><a href="Util.html#def_static_method-instance_method" title="Haml::Util#def_static_method (method)">#def_static_method</a></span>, <span class='object_link'><a href="Util.html#dump-instance_method" title="Haml::Util#dump (method)">#dump</a></span>, <span class='object_link'><a href="Util.html#enum_cons-instance_method" title="Haml::Util#enum_cons (method)">#enum_cons</a></span>, <span class='object_link'><a href="Util.html#enum_slice-instance_method" title="Haml::Util#enum_slice (method)">#enum_slice</a></span>, <span class='object_link'><a href="Util.html#enum_with_index-instance_method" title="Haml::Util#enum_with_index (method)">#enum_with_index</a></span>, <span class='object_link'><a href="Util.html#flatten-instance_method" title="Haml::Util#flatten (method)">#flatten</a></span>, <span class='object_link'><a href="Util.html#haml_warn-instance_method" title="Haml::Util#haml_warn (method)">#haml_warn</a></span>, <span class='object_link'><a href="Util.html#has%3F-instance_method" title="Haml::Util#has? (method)">#has?</a></span>, <span class='object_link'><a href="Util.html#html_safe-instance_method" title="Haml::Util#html_safe (method)">#html_safe</a></span>, <span class='object_link'><a href="Util.html#inspect_obj-instance_method" title="Haml::Util#inspect_obj (method)">#inspect_obj</a></span>, <span class='object_link'><a href="Util.html#intersperse-instance_method" title="Haml::Util#intersperse (method)">#intersperse</a></span>, <span class='object_link'><a href="Util.html#ironruby%3F-instance_method" title="Haml::Util#ironruby? (method)">#ironruby?</a></span>, <span class='object_link'><a href="Util.html#lcs-instance_method" title="Haml::Util#lcs (method)">#lcs</a></span>, <span class='object_link'><a href="Util.html#load-instance_method" title="Haml::Util#load (method)">#load</a></span>, <span class='object_link'><a href="Util.html#map_hash-instance_method" title="Haml::Util#map_hash (method)">#map_hash</a></span>, <span class='object_link'><a href="Util.html#map_keys-instance_method" title="Haml::Util#map_keys (method)">#map_keys</a></span>, <span class='object_link'><a href="Util.html#map_vals-instance_method" title="Haml::Util#map_vals (method)">#map_vals</a></span>, <span class='object_link'><a href="Util.html#merge_adjacent_strings-instance_method" title="Haml::Util#merge_adjacent_strings (method)">#merge_adjacent_strings</a></span>, <span class='object_link'><a href="Util.html#ord-instance_method" title="Haml::Util#ord (method)">#ord</a></span>, <span class='object_link'><a href="Util.html#paths-instance_method" title="Haml::Util#paths (method)">#paths</a></span>, <span class='object_link'><a href="Util.html#powerset-instance_method" title="Haml::Util#powerset (method)">#powerset</a></span>, <span class='object_link'><a href="Util.html#rails_env-instance_method" title="Haml::Util#rails_env (method)">#rails_env</a></span>, <span class='object_link'><a href="Util.html#rails_root-instance_method" title="Haml::Util#rails_root (method)">#rails_root</a></span>, <span class='object_link'><a href="Util.html#rails_safe_buffer_class-instance_method" title="Haml::Util#rails_safe_buffer_class (method)">#rails_safe_buffer_class</a></span>, <span class='object_link'><a href="Util.html#rails_xss_safe%3F-instance_method" title="Haml::Util#rails_xss_safe? (method)">#rails_xss_safe?</a></span>, <span class='object_link'><a href="Util.html#restrict-instance_method" title="Haml::Util#restrict (method)">#restrict</a></span>, <span class='object_link'><a href="Util.html#ruby1_8%3F-instance_method" title="Haml::Util#ruby1_8? (method)">#ruby1_8?</a></span>, <span class='object_link'><a href="Util.html#ruby1_8_6%3F-instance_method" title="Haml::Util#ruby1_8_6? (method)">#ruby1_8_6?</a></span>, <span class='object_link'><a href="Util.html#scope-instance_method" title="Haml::Util#scope (method)">#scope</a></span>, <span class='object_link'><a href="Util.html#set_eql%3F-instance_method" title="Haml::Util#set_eql? (method)">#set_eql?</a></span>, <span class='object_link'><a href="Util.html#set_hash-instance_method" title="Haml::Util#set_hash (method)">#set_hash</a></span>, <span class='object_link'><a href="Util.html#silence_haml_warnings-instance_method" title="Haml::Util#silence_haml_warnings (method)">#silence_haml_warnings</a></span>, <span class='object_link'><a href="Util.html#silence_warnings-instance_method" title="Haml::Util#silence_warnings (method)">#silence_warnings</a></span>, <span class='object_link'><a href="Util.html#static_method_name-instance_method" title="Haml::Util#static_method_name (method)">#static_method_name</a></span>, <span class='object_link'><a href="Util.html#strip_string_array-instance_method" title="Haml::Util#strip_string_array (method)">#strip_string_array</a></span>, <span class='object_link'><a href="Util.html#substitute-instance_method" title="Haml::Util#substitute (method)">#substitute</a></span>, <span class='object_link'><a href="Util.html#to_hash-instance_method" title="Haml::Util#to_hash (method)">#to_hash</a></span>, <span class='object_link'><a href="Util.html#try_sass-instance_method" title="Haml::Util#try_sass (method)">#try_sass</a></span>, <span class='object_link'><a href="Util.html#version_geq-instance_method" title="Haml::Util#version_geq (method)">#version_geq</a></span>, <span class='object_link'><a href="Util.html#version_gt-instance_method" title="Haml::Util#version_gt (method)">#version_gt</a></span>, <span class='object_link'><a href="Util.html#windows%3F-instance_method" title="Haml::Util#windows? (method)">#windows?</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Helpers.html" title="Haml::Helpers (module)">Helpers</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Helpers.html#action_view%3F-class_method" title="Haml::Helpers.action_view? (method)">action_view?</a></span>, <span class='object_link'><a href="Helpers.html#block_is_haml%3F-instance_method" title="Haml::Helpers#block_is_haml? (method)">#block_is_haml?</a></span>, <span class='object_link'><a href="Helpers.html#capture_haml-instance_method" title="Haml::Helpers#capture_haml (method)">#capture_haml</a></span>, <span class='object_link'><a href="Helpers.html#escape_once-instance_method" title="Haml::Helpers#escape_once (method)">#escape_once</a></span>, <span class='object_link'><a href="Helpers.html#find_and_preserve-instance_method" title="Haml::Helpers#find_and_preserve (method)">#find_and_preserve</a></span>, <span class='object_link'><a href="Helpers.html#haml_concat-instance_method" title="Haml::Helpers#haml_concat (method)">#haml_concat</a></span>, <span class='object_link'><a href="Helpers.html#haml_indent-instance_method" title="Haml::Helpers#haml_indent (method)">#haml_indent</a></span>, <span class='object_link'><a href="Helpers.html#haml_tag-instance_method" title="Haml::Helpers#haml_tag (method)">#haml_tag</a></span>, <span class='object_link'><a href="Helpers.html#html_attrs-instance_method" title="Haml::Helpers#html_attrs (method)">#html_attrs</a></span>, <span class='object_link'><a href="Helpers.html#html_escape-instance_method" title="Haml::Helpers#html_escape (method)">#html_escape</a></span>, <span class='object_link'><a href="Helpers.html#init_haml_helpers-instance_method" title="Haml::Helpers#init_haml_helpers (method)">#init_haml_helpers</a></span>, <span class='object_link'><a href="Helpers.html#is_haml%3F-instance_method" title="Haml::Helpers#is_haml? (method)">#is_haml?</a></span>, <span class='object_link'><a href="Helpers.html#list_of-instance_method" title="Haml::Helpers#list_of (method)">#list_of</a></span>, <span class='object_link'><a href="Helpers.html#non_haml-instance_method" title="Haml::Helpers#non_haml (method)">#non_haml</a></span>, <span class='object_link'><a href="Helpers.html#precede-instance_method" title="Haml::Helpers#precede (method)">#precede</a></span>, <span class='object_link'><a href="Helpers.html#preserve-instance_method" title="Haml::Helpers#preserve (method)">#preserve</a></span>, <span class='object_link'><a href="Helpers.html#succeed-instance_method" title="Haml::Helpers#succeed (method)">#succeed</a></span>, <span class='object_link'><a href="Helpers.html#surround-instance_method" title="Haml::Helpers#surround (method)">#surround</a></span>, <span class='object_link'><a href="Helpers.html#tab_down-instance_method" title="Haml::Helpers#tab_down (method)">#tab_down</a></span>, <span class='object_link'><a href="Helpers.html#tab_up-instance_method" title="Haml::Helpers#tab_up (method)">#tab_up</a></span>, <span class='object_link'><a href="Helpers.html#with_tabs-instance_method" title="Haml::Helpers#with_tabs (method)">#with_tabs</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Helpers/ActionViewExtensions.html" title="Haml::Helpers::ActionViewExtensions (module)">Helpers::ActionViewExtensions</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Helpers/ActionViewExtensions.html#page_class-instance_method" title="Haml::Helpers::ActionViewExtensions#page_class (method)">#page_class</a></span>, <span class='object_link'><a href="Helpers/ActionViewExtensions.html#with_raw_haml_concat-instance_method" title="Haml::Helpers::ActionViewExtensions#with_raw_haml_concat (method)">#with_raw_haml_concat</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Haml::Buffer (class)">Buffer</a></span></tt>) <strong>initialize</strong>(upper = nil, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>A new instance of Buffer</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>upper</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Haml::Buffer (class)">Buffer</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The parent buffer</p></div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>{Symbol =&gt; <span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span>}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>An options hash. See <span class='object_link'><a href="Engine.html#options_for_buffer-instance_method" title="Haml::Engine#options_for_buffer (method)">Engine#options_for_buffer</a></span></p></div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92
93
94
95
96
97
98
99
100</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 90</span>

def initialize(upper = nil, options = {})
  @active = true
  @upper = upper
  @options = options
  @buffer = ruby1_8? ? &quot;&quot; : &quot;&quot;.encode(Encoding.find(options[:encoding]))
  @tabulation = 0

  # The number of tabs that Engine thinks we should have
  # @real_tabs + @tabulation is the number of tabs actually output
  @real_tabs = 0
end</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="active=-instance_method"></span>
      <span id=""></span>
      <div class="method_details first">
  <p class="signature first" id="active=-instance_method">
  
    - (<tt>Boolean</tt>) <strong>active=</strong>(value)  <span class="extras">(writeonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="#active%3F-instance_method" title="Haml::Buffer#active? (method)">#active?</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 37</span>

def active=(value)
  @active = value
end</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="buffer=-instance_method"></span>
      <span id="buffer-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="buffer-instance_method">
  
    - (<tt>String</tt>) <strong>buffer</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>The string that holds the compiled HTML. This is aliased as <code>_erbout</code> for compatibility with ERB-specific code.</p>

  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 14</span>

def buffer
  @buffer
end</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="capture_position=-instance_method"></span>
      <span id="capture_position-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="capture_position-instance_method">
  
    - (<tt>Fixnum</tt><sup>?</sup>) <strong>capture_position</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>nil if there&#8217;s no capture_haml block running, and the position at which it&#8217;s beginning the capture if there is one.</p>

  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Fixnum</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 33</span>

def capture_position
  @capture_position
end</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="options=-instance_method"></span>
      <span id="options-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="options-instance_method">
  
    - (<tt>{String =&gt; <span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span>}</tt>) <strong>options</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>The options hash passed in from <span class='object_link'><a href="Engine.html" title="Haml::Engine (class)">Engine</a></span>.</p>

  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>{String =&gt; <span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span>}</tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="Engine.html#options_for_buffer-instance_method" title="Haml::Engine#options_for_buffer (method)">Engine#options_for_buffer</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 20</span>

def options
  @options
end</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="upper=-instance_method"></span>
      <span id="upper-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="upper-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Haml::Buffer (class)">Buffer</a></span></tt>) <strong>upper</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>The <span class='object_link'><a href="" title="Haml::Buffer (class)">Haml::Buffer</a></span> for the enclosing Haml document. This is set for partials and similar sorts of nested templates. It&#8217;s <code>nil</code> at the top level (see <span class='object_link'><a href="#toplevel%3F-instance_method" title="Haml::Buffer#toplevel? (method)">#toplevel?</a></span>).</p>

  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Haml::Buffer (class)">Buffer</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 27</span>

def upper
  @upper
end</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="merge_attrs-class_method">
  
    + (<tt>{String =&gt; String}</tt>) <strong>merge_attrs</strong>(to, from) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Merges two attribute hashes. This is the same as <code>to.merge!(from)</code>, except that it merges id, class, and data attributes.</p>

<p>ids are concatenated with <code>&quot;_&quot;</code>, and classes are concatenated with <code>&quot; &quot;</code>. data hashes are simply merged.</p>

<p>Destructively modifies both <code>to</code> and <code>from</code>.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>to</span>
      
      
        <span class='type'>(<tt>{String =&gt; String}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The attribute hash to merge into</p></div>
      
    </li>
  
    <li>
      
        <span class='name'>from</span>
      
      
        <span class='type'>(<tt>{String =&gt; #to_s}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The attribute hash to merge from</p></div>
      
    </li>
  
</ul>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>{String =&gt; String}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>to</code>, after being merged</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 225</span>

def self.merge_attrs(to, from)
  from['id'] = Compiler.filter_and_join(from['id'], '_') if from['id']
  if to['id'] &amp;&amp; from['id']
    to['id'] &lt;&lt; '_' &lt;&lt; from.delete('id').to_s
  elsif to['id'] || from['id']
    from['id'] ||= to['id']
  end

  from['class'] = Compiler.filter_and_join(from['class'], ' ') if from['class']
  if to['class'] &amp;&amp; from['class']
    # Make sure we don't duplicate class names
    from['class'] = (from['class'].to_s.split(' ') | to['class'].split(' ')).sort.join(' ')
  elsif to['class'] || from['class']
    from['class'] ||= to['class']
  end

  from_data = from['data'].is_a?(Hash)
  to_data = to['data'].is_a?(Hash)
  if from_data &amp;&amp; to_data
    to['data'] = to['data'].merge(from['data'])
  elsif to_data
    to = Haml::Util.map_keys(to.delete('data')) {|name| &quot;data-#{name}&quot;}.merge(to)
  elsif from_data
    from = Haml::Util.map_keys(from.delete('data')) {|name| &quot;data-#{name}&quot;}.merge(from)
  end

  to.merge!(from)
end</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="active?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>active?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Whether or not this buffer is currently being used to render a Haml template. Returns <code>false</code> if a subtemplate is being rendered, even if it&#8217;s a subtemplate of this buffer&#8217;s template.</p>

  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


70
71
72</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 70</span>

def active?
  @active
end</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="adjust_tabs-instance_method">
  
    - <strong>adjust_tabs</strong>(tab_change) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Modifies the indentation of the document.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>tab_change</span>
      
      
        <span class='type'>(<tt>Fixnum</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The number of tabs by which to increase or decrease the document&#8217;s indentation</p></div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 126</span>

def adjust_tabs(tab_change)
  @real_tabs += tab_change
end</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="attributes-instance_method">
  
    - <strong>attributes</strong>(class_id, obj_ref, *attributes_hashes) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


191
192
193
194
195
196
197
198
199</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 191</span>

def attributes(class_id, obj_ref, *attributes_hashes)
  attributes = class_id
  attributes_hashes.each do |old|
    self.class.merge_attrs(attributes, to_hash(old.map {|k, v| [k.to_s, v]}))
  end
  self.class.merge_attrs(attributes, parse_object_ref(obj_ref)) if obj_ref
  Compiler.build_attributes(
    html?, @options[:attr_wrapper], @options[:escape_attrs], attributes)
end</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="html4?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>html4?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Whether or not the format is HTML4</p>

  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Whether or not the format is HTML4</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 50</span>

def html4?
  @options[:format] == :html4
end</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="html5?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>html5?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Whether or not the format is HTML5.</p>

  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Whether or not the format is HTML5.</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 55</span>

def html5?
  @options[:format] == :html5
end</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="html?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>html?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Whether or not the format is any flavor of HTML</p>

  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Whether or not the format is any flavor of HTML</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 45</span>

def html?
  html4? or html5?
end</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="push_text-instance_method">
  
    - <strong>push_text</strong>(text, tab_change, dont_tab_up) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Appends text to the buffer, properly tabulated. Also modifies the document&#8217;s indentation.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>text</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The text to append</p></div>
      
    </li>
  
    <li>
      
        <span class='name'>tab_change</span>
      
      
        <span class='type'>(<tt>Fixnum</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The number of tabs by which to increase or decrease the document&#8217;s indentation</p></div>
      
    </li>
  
    <li>
      
        <span class='name'>dont_tab_up</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If true, don&#8217;t indent the first line of <code>text</code></p></div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


109
110
111
112
113
114
115
116
117
118
119
120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 109</span>

def push_text(text, tab_change, dont_tab_up)
  if @tabulation &gt; 0
    # Have to push every line in by the extra user set tabulation.
    # Don't push lines with just whitespace, though,
    # because that screws up precompiled indentation.
    text.gsub!(/^(?!\s+$)/m, tabs)
    text.sub!(tabs, '') if dont_tab_up
  end

  @buffer &lt;&lt; text
  @real_tabs += tab_change
end</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rstrip!-instance_method">
  
    - <strong>rstrip!</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Remove the whitespace from the right side of the buffer string. Doesn&#8217;t do anything if we&#8217;re at the beginning of a capture_haml block.</p>

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205
206
207
208
209
210</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 203</span>

def rstrip!
  if capture_position.nil?
    buffer.rstrip!
    return
  end

  buffer &lt;&lt; buffer.slice!(capture_position..-1).rstrip
end</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="tabulation-instance_method">
  
    - (<tt>Fixnum</tt>) <strong>tabulation</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>The current indentation level of the document</p>

  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Fixnum</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The current indentation level of the document</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


75
76
77</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 75</span>

def tabulation
  @real_tabs + @tabulation
end</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="tabulation=-instance_method">
  
    - <strong>tabulation=</strong>(val) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Sets the current tabulation of the document.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>val</span>
      
      
        <span class='type'>(<tt>Fixnum</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The new tabulation</p></div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 82</span>

def tabulation=(val)
  val = val - @real_tabs
  @tabulation = val &gt; -1 ? val : 0
end</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="toplevel?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>toplevel?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Whether or not this buffer is a top-level template, as opposed to a nested partial</p>

  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Whether or not this buffer is a top-level template, as opposed to a nested partial</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 61</span>

def toplevel?
  upper.nil?
end</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="xhtml?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>xhtml?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Whether or not the format is XHTML</p>

  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Whether or not the format is XHTML</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/haml/buffer.rb', line 40</span>

def xhtml?
  not html?
end</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Jan 14 22:49:49 2012 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.4 (ruby-1.8.7).
</div>

  </body>
</html>